{% load static %}

<!DOCTYPE html>
<html lang="en">
{% include 'blocks/head_block.html' %}
<head>
    {% block title %} {% endblock %}
    <link href="{% static 'css/cover.css' %}" rel="stylesheet">
    <style>
        /* Основные стили для сетки и карточек */
/* Основные стили для сетки и карточек */
/* Основные стили для сетки и карточек */
.product-grid {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.product-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); /* По умолчанию для мобильных */
  gap: 10px;
}

.product-card {
  background: #171a1c;
  {#border: 1px solid rgba(224, 224, 224, 0.52);#}
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s, box-shadow 0.2s;
  position: relative;
  display: flex;
  flex-direction: column; /* Чтобы карточка растягивалась по высоте */
  text-shadow: none;
  text-align: left;
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.product-image {
  width: 100%;
  height: 300px; /* Увеличил высоту изображения */
  object-fit: cover;
}

.product-info {
  padding: 15px;
  flex-grow: 1; /* Чтобы блок занимал оставшееся пространство */
  display: flex;
  flex-direction: column; /* Чтобы внутренние элементы выстраивались в колонку */
}

.product-price {
  font-size: 1.2rem; /* Увеличил размер шрифта */
  color: #10c24b;
  font-weight: 500;   
  margin-bottom: 10px;
}

.discount-badge {
  color: #ef117d;
  font-weight: 550;
  font-size: 1.2rem; /* Увеличил размер шрифта */
  display: inline-block;
}

.original-price {
  text-decoration: line-through;
  color: #a6a2ad;
  font-size: 0.6rem; /* Увеличил размер шрифта */
}

.stock-info {
  font-size: 0.875rem; /* Увеличил размер шрифта */
  color: #ffffff;
  margin-bottom: 10px;
}

.product-description {
  font-size: 0.875rem;
  color: #ffffff;
  margin-bottom: 10px;
  flex-grow: 1; /* Описание товара занимает всё доступное пространство */
}

.store-info {
  font-size: 0.75rem;
  color: #ffffff;
  margin-top: auto; /* Прижимаем к низу */
}

.product-link {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

.no-products {
  text-align: center;
  font-size: 1.25rem; /* Увеличил размер шрифта */
  color: #666;
  margin-top: 20px;
}

/* Медиа-запросы для адаптивности */
@media (min-width: 480px) {
  .product-container {
    grid-template-columns: repeat(2, 1fr); /* 2 колонки на мобильных */
  }
    
    
}

@media (min-width: 768px) {
  .product-container {
    grid-template-columns: repeat(3, 1fr); /* 3 колонки на планшетах */
  }
}

@media (min-width: 1024px) {
  .product-container {
    grid-template-columns: repeat(4, 1fr); /* 4 колонки на десктопах */
  }
}
@media (max-width: 480px) {
  /* Стили для телефонов */
  .product-price {
    font-size: 0.9rem; /* Уменьшаем размер шрифта */
  }
  .discount-badge {
    font-size: 0.9rem;
  }
  .original-price {
    font-size: 0.75rem;
  }
  .stock-info {
    font-size: 0.6rem;
  }
  .product-description {
    font-size: 0.8rem;
  }
  .store-info {
    font-size: 0.7rem;
  }
}

@media (min-width: 481px) and (max-width: 768px) {
  /* Стили для планшетов */
  .product-price {
    font-size: 1.125rem;
  }
  .discount-badge {
    font-size: 0.8125rem;
  }
  .original-price {
    font-size: 0.8125rem;
  }
  .stock-info {
    font-size: 0.8125rem;
  }
  .product-description {
    font-size: 0.8125rem;
  }
  .store-info {
    font-size: 0.6875rem;
  }
}

       
{#мжйн чать        #}
        /* Основные стили для блока магазина */
.business-header {
  position: relative;
  height: 400px; /* Высота блока */
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  text-align: center;
  overflow: hidden;
    border-radius: 10px;
    margin-top: 20px;
}

/* Затемненный фон */
.business-header::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5); /* Затемнение */
  z-index: 1;
}

/* Контейнер для фоновых изображений */
.business-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-wrap: wrap;
  {#gap: 10px; /* Расстояние между картинками */#}
  {#padding: 10px;#}
  z-index: 0;
}

/* Стили для фоновых изображений */
.background-image {
  flex: 1 1 calc(20% - 10px); /* 5 картинок в ряд */
  height: 100%;
  object-fit: cover;
  opacity: 0.5; /* Полупрозрачность */
}

/* Контент магазина (название, описание, кнопка) */
.business-content {
  position: relative;
  z-index: 2; /* Чтобы контент был поверх затемнения */
  max-width: 800px;
  padding: 20px;
  background: rgba(0, 0, 0, 0.5); /* Легкий фон для текста */
  border-radius: 10px;
}
    </style>

</head>
<body class="d-flex h-100 text-center text-bg-dark" style="height: 100vh;">
    

    
<div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
  <header class="mb-auto">
    <div>
      <h3 class="float-md-start mb-0">Cover</h3>
      <nav class="nav nav-masthead justify-content-center float-md-end">
        <a class="nav-link fw-bold py-1 px-0 active" aria-current="page" href="#">Home</a>
        <a class="nav-link fw-bold py-1 px-0" href="#">Features</a>
        <a class="nav-link fw-bold py-1 px-0" href="#">Contact</a>
      </nav>
    </div>
  </header>

  <main class="business-header">
  <div class="business-background">
    {% for product in business.products.all|slice:":2" %}
      {% if product.images.first %}
        <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" class="background-image">
      {% endif %}
    {% endfor %}
  </div>
  <div class="business-content">
    <h1>{{ business.name }}</h1>
    <p class="lead">{{ business.description }}</p>
    <p class="lead">
      <a href="#" class="btn btn-lg btn-light fw-bold border-white bg-white">Learn more</a>
    </p>
  </div>
</main>
    <div class="product-grid">
  {% if page_obj and page_obj.object_list %}
    <div class="product-container">
      {% for product in page_obj.object_list %}
        <div class="product-card">
          {% if product.images.first %}
            <img src="{{ product.images.first.image.url }}" class="product-image" alt="{{ product.name }}">
          {% endif %}
          <div class="product-info">
            {% if product.discount > 0 %}
              <p class="product-price">
                <span class="discount-badge">{{ product.discount }} тг</span>
                <span class="original-price">{{ product.price }} тг</span>
              </p>
            {% else %}
              <p class="product-price">{{ product.price }} тг</p>
            {% endif %}
            <p class="stock-info">Осталось: {{ product.stock_quantity }} шт.</p>
            <p class="product-description">{{ product.description|truncatewords:10 }}</p>
            <small class="store-info">Магазин: {{ product.business.name }}</small>
          </div>
          {% if edit %}
            <a href="{% url 'marketplace:product_edit' product.id %}" class="product-link"></a>
          {% else %}
            <a href="{% url 'marketplace:product_detail' product.id %}" class="product-link"></a>
          {% endif %}
        </div>
      {% endfor %}
    </div>
    {% include 'marketplace/includes/pagination.html' %}
  {% else %}
    {% if products %}
      <div class="product-container">
        {% for product in products %}
          <div class="product-card">
            {% if product.images.first %}
              <img src="{{ product.images.first.image.url }}" class="product-image" alt="{{ product.name }}">
            {% endif %}
            <div class="product-info">
              {% if product.discount > 0 %}
                <p class="product-price">
                  <span class="discount-badge">{{ product.discount }} тг</span>
                  <span class="original-price">{{ product.price }} тг</span>
                </p>
              {% else %}
                <p class="product-price">{{ product.price }} тг</p>
              {% endif %}
              <p class="stock-info">Осталось: {{ product.stock_quantity }} шт.</p>
              <p class="product-description">{{ product.description|truncatewords:10 }}</p>
              <small class="store-info">Магазин: {{ product.business.name }}</small>
            </div>
            {% if edit %}
              <a href="{% url 'marketplace:product_edit' product.id %}" class="product-link"></a>
            {% else %}
              <a href="{% url 'marketplace:product_detail' product.id %}" class="product-link"></a>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="no-products">Товаров пока нет.</p>
    {% endif %}
  {% endif %}
</div>

  <footer class="mt-auto text-white-50">
    <p>Cover template for <a href="https://getbootstrap.com/" class="text-white">Bootstrap</a>, by <a href="https://twitter.com/mdo" class="text-white">@mdo</a>.</p>
  </footer>
</div>

    



